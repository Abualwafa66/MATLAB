function out = confidence(x, percent)

conf = [0 50 60 70 80 90 95 98 99 99.8 99.9];
t_tab = [ ...
    1 0 1.0000 1.3760 1.9630 3.0780 6.3140 12.7100 31.8200 63.6600 318.3100 636.6200
    2 0 0.8160 1.0610 1.3860 1.8860 2.9200 4.3030 6.9650 9.9250 22.3270 31.5990
    3 0 0.7650 0.9780 1.2500 1.6380 2.3530 3.1820 4.5410 5.8410 10.2150 12.9240
    4 0 0.7410 0.9410 1.1900 1.5330 2.1320 2.7760 3.7470 4.6040 7.1730 8.6100
    5 0 0.7270 0.9200 1.1560 1.4760 2.0150 2.5710 3.3650 4.0320 5.8930 6.8690
    6 0 0.7180 0.9060 1.1340 1.4400 1.9430 2.4470 3.1430 3.7070 5.2080 5.9590
    7 0 0.7110 0.8960 1.1190 1.4150 1.8950 2.3650 2.9980 3.4990 4.7850 5.4080
    8 0 0.7060 0.8890 1.1080 1.3970 1.8600 2.3060 2.8960 3.3550 4.5010 5.0410
    9 0 0.7030 0.8830 1.1000 1.3830 1.8330 2.2620 2.8210 3.2500 4.2970 4.7810
    10 0 0.7000 0.8790 1.0930 1.3720 1.8120 2.2280 2.7640 3.1690 4.1440 4.5870
    11 0 0.6970 0.8760 1.0880 1.3630 1.7960 2.2010 2.7180 3.1060 4.0250 4.4370
    12 0 0.6950 0.8730 1.0830 1.3560 1.7820 2.1790 2.6810 3.0550 3.9300 4.3180
    13 0 0.6940 0.8700 1.0790 1.3500 1.7710 2.1600 2.6500 3.0120 3.8520 4.2210
    14 0 0.6920 0.8680 1.0760 1.3450 1.7610 2.1450 2.6240 2.9770 3.7870 4.1400
    15 0 0.6910 0.8660 1.0740 1.3410 1.7530 2.1310 2.6020 2.9470 3.7330 4.0730
    16 0 0.6900 0.8650 1.0710 1.3370 1.7460 2.1200 2.5830 2.9210 3.6860 4.0150
    17 0 0.6890 0.8630 1.0690 1.3330 1.7400 2.1100 2.5670 2.8980 3.6460 3.9650
    18 0 0.6880 0.8620 1.0670 1.3300 1.7340 2.1010 2.5520 2.8780 3.6100 3.9220
    19 0 0.6880 0.8610 1.0660 1.3280 1.7290 2.0930 2.5390 2.8610 3.5790 3.8830
    20 0 0.6870 0.8600 1.0640 1.3250 1.7250 2.0860 2.5280 2.8450 3.5520 3.8500
    21 0 0.6860 0.8590 1.0630 1.3230 1.7210 2.0800 2.5180 2.8310 3.5270 3.8190
    22 0 0.6860 0.8580 1.0610 1.3210 1.7170 2.0740 2.5080 2.8190 3.5050 3.7920
    23 0 0.6850 0.8580 1.0600 1.3190 1.7140 2.0690 2.5000 2.8070 3.4850 3.7680
    24 0 0.6850 0.8570 1.0590 1.3180 1.7110 2.0640 2.4920 2.7970 3.4670 3.7450
    25 0 0.6840 0.8560 1.0580 1.3160 1.7080 2.0600 2.4850 2.7870 3.4500 3.7250
    26 0 0.6840 0.8560 1.0580 1.3150 1.7060 2.0560 2.4790 2.7790 3.4350 3.7070
    27 0 0.6840 0.8550 1.0570 1.3140 1.7030 2.0520 2.4730 2.7710 3.4210 3.6900
    28 0 0.6830 0.8550 1.0560 1.3130 1.7010 2.0480 2.4670 2.7630 3.4080 3.6740
    29 0 0.6830 0.8540 1.0550 1.3110 1.6990 2.0450 2.4620 2.7560 3.3960 3.6590
    30 0 0.6830 0.8540 1.0550 1.3100 1.6970 2.0420 2.4570 2.7500 3.3850 3.6460
    40 0 0.6810 0.8510 1.0500 1.3030 1.6840 2.0210 2.4230 2.7040 3.3070 3.5510
    60 0 0.6790 0.8480 1.0450 1.2960 1.6710 2.0000 2.3900 2.6600 3.2320 3.4600
    80 0 0.6780 0.8460 1.0430 1.2920 1.6640 1.9900 2.3740 2.6390 3.1950 3.4160
    100 0 0.6770 0.8450 1.0420 1.2900 1.6600 1.9840 2.3640 2.6260 3.1740 3.3900
    1000 0 0.6750 0.8420 1.0370 1.2820 1.6460 1.9620 2.3300 2.5810 3.0980 3.3000];

if iscell(x);
    a = x{1};
    s = x{2};
    n = x{3};
else
    n = length(x);
    s = std(x);
    a = avg(x);
end

df = n-1;

if df <= 30; r = df;
elseif df <= 34; r = 30;
elseif df <= 50; r = 31;
elseif df <= 70; r = 32;
elseif df <= 90; r = 33;
elseif df <= 200; r = 34;
else r = 35;
end

if isempty(find(conf == percent,1));
    disp('Confidence percentage not recorded');
else
    c = find(conf == percent);
    T = t_tab(r,c);
    out = [a - T*s/sqrt(n), a + T*s/sqrt(n)];
end

end

